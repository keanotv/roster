import{_ as I,d as U,u as C,w as M,r as O,o as R,g as j,c as p,F as v,a as B,b as S,e as _,f as a,t as m,M as D,h as s,i as t,j as u,k as F,l as P,p as q,m as A,n as E,q as H,s as L,O as z,v as G,x as J}from"./index.f75c83c3.js";const T=i=>(q("data-v-28e9b1ca"),i=i(),A(),i),K={id:"unavailability",class:"p-8 w-[100vw]"},Q=T(()=>a("h1",{class:"my-2 text-center"},"Unavailability",-1)),W={class:"text-lg font-bold m-1"},X=T(()=>a("colgroup",null,[a("col"),a("col"),a("col")],-1)),Y={class:"reason-box"},Z=U({__name:"UnavailabilityView",async setup(i){let y,w;const l=C();[y,w]=M(()=>Promise.all([l.getUnavailability(),l.getPeople(),l.getReasons()])),await y,w();const f=O([]);R(()=>{f.value=l.unavailability.map(e=>{var r;const o=l.people.find(n=>n.id===e.people_id),c=(r=l.reasons.find(n=>n.people_id===e.people_id&&n.year===e.year&&n.month===e.month))==null?void 0:r.text;if(o!==void 0)return{name:o.name,year:e.year,month:e.month,days:e.days,reason:c}}),f.value=f.value.sort(function(e,o){return(e==null?void 0:e.name)<(o==null?void 0:o.name)?-1:(e==null?void 0:e.name)>(o==null?void 0:o.name)?1:0})});const N=j();return(e,o)=>{const c=E,r=H,n=L,x=z,V=G,k=J;return _(),p("div",K,[Q,(_(!0),p(v,null,B(S(N),h=>(_(),p(v,null,[a("p",W,m(S(D)[h.month-1])+" "+m(h.year),1),s(k,{hover:"",small:"",responsive:""},{default:t(()=>[X,s(n,null,{default:t(()=>[s(r,null,{default:t(()=>[s(c,{class:"w-20"},{default:t(()=>[u("Name")]),_:1}),s(c,{class:"w-24"},{default:t(()=>[u("Date(s)")]),_:1}),s(c,null,{default:t(()=>[u("Reason")]),_:1})]),_:1})]),_:1}),s(V,{class:"text-sm"},{default:t(()=>[(_(!0),p(v,null,B(f.value,d=>(_(),p(v,null,[h.year===d.year&&h.month===d.month?(_(),F(r,{key:0},{default:t(()=>[s(x,null,{default:t(()=>[u(m(d.name),1)]),_:2},1024),s(x,null,{default:t(()=>[u(m(d.days.join(", ")),1)]),_:2},1024),s(x,null,{default:t(()=>{var g;return[a("div",Y,m((g=d.reason)!=null?g:"-"),1)]}),_:2},1024)]),_:2},1024)):P("",!0)],64))),256))]),_:2},1024)]),_:2},1024)],64))),256))])}}});var b=I(Z,[["__scopeId","data-v-28e9b1ca"]]);export{b as default};
